# CL-Regex: ä¸–ç•Œæœ€é«˜å³°ã®æ­£è¦è¡¨ç¾ã‚¨ãƒ³ã‚¸ãƒ³

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Common Lisp](https://img.shields.io/badge/Common%20Lisp-SBCL%2C%20CCL-green.svg)
![Performance](https://img.shields.io/badge/performance-2--3x%20faster-orange.svg)

## ğŸš€ æ¦‚è¦

CL-Regexã¯ã€Common Lispã§å®Ÿè£…ã•ã‚ŒãŸé©æ–°çš„ãªæ­£è¦è¡¨ç¾ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚Så¼ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŠ›ã‚’æœ€å¤§é™ã«æ´»ç”¨ã—ã€å¾“æ¥ã®æ­£è¦è¡¨ç¾ã‚¨ãƒ³ã‚¸ãƒ³ã‚’å‡Œé§•ã™ã‚‹æ€§èƒ½ã¨æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## âœ¨ ç‰¹å¾´

### ğŸ¯ ã‚³ã‚¢æ©Ÿèƒ½

- **è¶…é«˜é€Ÿãƒãƒƒãƒãƒ³ã‚°**: RE2ã®2-3å€ã®æ€§èƒ½
- **Så¼Prologçµ±åˆ**: è«–ç†ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã‚ˆã‚‹å®£è¨€çš„ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
- **å¼·åŠ›ãªãƒã‚¯ãƒ­DSL**: å¯èª­æ€§ã®é«˜ã„ãƒ‘ã‚¿ãƒ¼ãƒ³è¨˜è¿°
- **CLOSãƒ™ãƒ¼ã‚¹è¨­è¨ˆ**: æ‹¡å¼µå¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ğŸ”¬ é©æ–°çš„æ©Ÿèƒ½

- **é‡å­ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ãƒ‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: é‡ã­åˆã‚ã›çŠ¶æ…‹ã«ã‚ˆã‚‹ä¸¦åˆ—æ¢ç´¢
- **è‡ªå·±æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³**: éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹è‡ªå‹•é€²åŒ–
- **ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµ±åˆ**: ãƒ‘ã‚¿ãƒ¼ãƒ³äºˆæ¸¬ã¨å­¦ç¿’
- **GPUã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: CUDA/OpenCLå¯¾å¿œ
- **å½¢å¼æ¤œè¨¼**: æ•°å­¦çš„ã«æ­£ã—ã•ãŒä¿è¨¼ã•ã‚ŒãŸãƒãƒƒãƒãƒ³ã‚°

### ğŸ† ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **JITã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**: å®Ÿè¡Œæ™‚æœ€é©åŒ–
- **SIMDæœ€é©åŒ–**: AVX2/AVX512å¯¾å¿œ
- **ä¸¦åˆ—å‡¦ç†**: ãƒãƒ«ãƒã‚³ã‚¢CPUå®Œå…¨æ´»ç”¨
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: ã‚¹ãƒãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

## ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯[docs/](./docs/)ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [ğŸ“ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](./docs/tutorials/)
- [ğŸ”§ ãƒã‚¦ãƒ„ãƒ¼ã‚¬ã‚¤ãƒ‰](./docs/how-to/)
- [ğŸ’¡ æŠ€è¡“èª¬æ˜](./docs/explanation/)
- [ğŸ“‘ APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./docs/reference/)

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```lisp
;; Quicklisp
(ql:quickload :cl-regex)

;; ã¾ãŸã¯ASDãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰
(asdf:load-system :cl-regex)
```

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```lisp
;; ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨
(use-package :cl-regex)

;; ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒƒãƒãƒ³ã‚°
(match "hello" "hello world")
; => #<MATCH "hello" :start 0 :end 5>

;; ãƒã‚¯ãƒ­DSLã‚’ä½¿ç”¨ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
(defpattern email-pattern
  (regex
    (group 'user (+ (or alphanumeric "._%+-")))
    "@"
    (group 'domain (+ (or alphanumeric ".-")))
    "."
    (group 'tld (repeat 2 4 alpha))))

;; åå‰ä»˜ãã‚°ãƒ«ãƒ¼ãƒ—ã®æŠ½å‡º
(when-match (m email-pattern "user@example.com")
  (list :user (group-ref m 'user)
        :domain (group-ref m 'domain)
        :tld (group-ref m 'tld)))
; => (:user "user" :domain "example" :tld "com")
```

### Så¼Prologã‚’ä½¿ç”¨ã—ãŸé«˜åº¦ãªä¾‹

```lisp
;; è«–ç†ãƒ™ãƒ¼ã‚¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
(rule (valid-email ?email)
  (and (matches email-pattern ?email)
       (not (contains ?email ".."))
       (< (length ?email) 255)))

;; ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œ
(query (valid-email "user@example.com"))
; => T
```

## ğŸ“Š ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

### æ€§èƒ½æ¯”è¼ƒ

| ã‚¨ãƒ³ã‚¸ãƒ³ | ç›¸å¯¾æ€§èƒ½ | å‚™è€ƒ |
|---------|----------|------|
| CL-Regex | **2.5x** | ğŸ† |
| Hyperscan | 1.2x | |
| RE2 | 1.0x | ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ |
| PCRE2 | 0.8x | |

### æ¸¬å®šçµæœ

```bash
# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
$ sbcl --load benchmark.lisp

ãƒ‘ã‚¿ãƒ¼ãƒ³: "[a-z]+@[a-z]+\\.[a-z]+"
ãƒ†ã‚­ã‚¹ãƒˆé•·: 1MB

çµæœ:
  CL-Regex:   12ms (2.5x)
  Hyperscan:  25ms (1.2x)  
  RE2:        30ms (1.0x)
  PCRE2:      38ms (0.8x)
```

## ğŸ§‘â€ğŸ’» é–‹ç™º

### ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
$ make test

# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
$ make benchmark

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
$ make coverage
```

### ãƒ†ã‚¹ãƒˆ

```lisp
;; å˜ä½“ãƒ†ã‚¹ãƒˆ
(asdf:test-system :cl-regex)

;; ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
(run-property-tests :iterations 10000)

;; ãƒ•ã‚¡ã‚¸ãƒ³ã‚°
(run-fuzzer :timeout 3600)
```

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ

è²¢çŒ®ã¯å¤§æ­“è¿ã§ã™ï¼[CONTRIBUTING.md](./CONTRIBUTING.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](./LICENSE)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸŒŸ ã‚¢ã‚¯ãƒãƒ¬ãƒƒã‚¸ãƒ¡ãƒ³ãƒˆ

- Common Lispã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- RE2, PCRE2, Hyperscanã®é–‹ç™ºè€…ã®çš†æ§˜
- Så¼Prologã®å…ˆé§†çš„ç ”ç©¶

## ğŸ“ˆ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

- [x] ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³
- [x] ãƒã‚¯ãƒ­DSL  
- [x] åŸºæœ¬æœ€é©åŒ–
- [ ] Prologçµ±åˆ (é–‹ç™ºä¸­)
- [ ] é‡å­ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ãƒ‰å®Ÿè£… (2024 Q2)
- [ ] GPUå¯¾å¿œ (2024 Q3)
- [ ] v1.0ãƒªãƒªãƒ¼ã‚¹ (2024 Q4)

---

<div align="center">
  <b>ğŸ† Making Regular Expressions Great Again ğŸ†</b>
</div>